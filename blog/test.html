<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Page</title>
</head>
<body>

<!-- Audio element added with the "id" attribute for easy reference in JavaScript -->
<audio id="backgroundMusic" loop>
    <source src="musics/evgeny.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
</audio>

<!-- Button to play music, hidden by default -->
<button id="playMusicBtn" style="display:none;" onclick="playMusic()">Play Music</button>

<script>
document.addEventListener("DOMContentLoaded", function(event) {
    var playMusic = confirm("Would you like background music?");
    if (playMusic) {
        console.log("User agreed to play music.");
        // Retrieve the audio element by its ID and attempt to play it
        var audio = document.getElementById("backgroundMusic");
        audio.play().then(() => {
            console.log("Playback started successfully");
        }).catch(e => {
            console.error("Autoplay was prevented: ", e.message);
            // Show the play button if autoplay fails
            document.getElementById("playMusicBtn").style.display = 'block';
        });
    } else {
        console.log("User declined to play music.");
    }
});

// Function to play music when the button is clicked
function playMusic() {
    var audio = document.getElementById("backgroundMusic");
    audio.play().then(() => {
        console.log("Playback started successfully");
        // Hide the button once music starts playing
        document.getElementById("playMusicBtn").style.display = 'none';
    }).catch(e => console.error("Error trying to play music: ", e.message));
}
</script>
</body>
</html>
